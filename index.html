<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <title>Flappy Bird</title>    
</head>
<body>
    <div class="d-flex justify-content-center mt-3">
        <div class="col-11 col-sm-9 col-md-8 col-xl-6">
            <div class="shadow-lg p-3 mb-5 bg-body rounded">
                <form id="neat-parameters-form">
                    <div class="shadow-sm p-3 mb-3 bg-body rounded">
                        <label for="max-generations" class="form-label">
                            Max Generations: <span class="badge bg-success" id="max-generations-value">50</span>
                        </label>
                        <input type="range" id="max-generations" name="maxGenerations" class="form-range" min="5" max="100" step="5" value="50" oninput="updateRangeValue('max-generations', 'max-generations-value')">
                    </div>
                
                    <div class="shadow-sm p-3 mb-3 bg-body rounded">
                        <label for="population-size" class="form-label">
                            Population Size: <span class="badge bg-success" id="population-size-value">100</span>
                        </label>
                        <input type="range" id="population-size" name="populationSize" class="form-range" min="10" max="1000" step="10" value="100" oninput="updateRangeValue('population-size', 'population-size-value')">
                    </div>

                    <div class="shadow-sm p-3 mb-3 bg-body rounded">
                        <label for="target-score" class="form-label">
                            Target Score: <span class="badge bg-success" id="target-score-value">100</span>
                        </label>
                        <input type="range" id="target-score" name="targetScore" class="form-range" min="10" max="250" step="10" value="100" oninput="updateRangeValue('target-score', 'target-score-value')">
                    </div>
                
                    <div class="shadow-sm p-3 mb-3 bg-body rounded">
                        <label for="elitism-percentage" class="form-label">
                            Elitism [%]: <span class="badge bg-success" id="elitism-percentage-value">10</span>
                        </label>
                        <input type="range" id="elitism-percentage" name="elitismPercentage" class="form-range" min="0" max="100" step="1" value="10" oninput="updateRangeValue('elitism-percentage', 'elitism-percentage-value')">
                    </div>            
                    
                    <div class="shadow-sm p-3 mb-3 bg-body rounded">
                        <label for="mutation-rate" class="form-label">
                            Mutation Rate [%]: <span class="badge bg-success" id="mutation-rate-value">10</span>
                        </label>
                        <input type="range" id="mutation-rate" name="mutationRate" class="form-range" min="0" max="100" step="1" value="10" oninput="updateRangeValue('mutation-rate', 'mutation-rate-value')">
                    </div>
                
                    <div class="d-flex justify-content-center">
                        <button type="submit" class="btn btn-success">Let's start the Evolution!</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <script>
        function updateRangeValue(inputId, spanId) {
            const input = document.getElementById(inputId);
            const span = document.getElementById(spanId);
            span.textContent = input.value;
        }
    </script>
    <script>
        document.getElementById('neat-parameters-form').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the form from submitting in the default way
    
            // Get the values from the form elements
            const MAX_GENERATIONS = document.getElementById('max-generations').value;
            const POPULATION_COUNT = document.getElementById('population-size').value;
            const TARGET_SCORE = document.getElementById('target-score').value;
            const ELITISM_PERCENTAGE = document.getElementById('elitism-percentage').value / 100;
            const MUTATION_RATE = document.getElementById('mutation-rate').value / 100;

            const url = `evolution.html?MAX_GENERATIONS=${MAX_GENERATIONS}&POPULATION_COUNT=${POPULATION_COUNT}&ELITISM_PERCENTAGE=${ELITISM_PERCENTAGE}&TARGET_SCORE=${TARGET_SCORE}&MUTATION_RATE=${MUTATION_RATE}`;
            window.location.href = url;
        });
    </script>
</body>
</html>